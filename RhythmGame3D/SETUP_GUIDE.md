# ğŸ› ï¸ Setup Guide - Rhythm Game 3D

HÆ°á»›ng dáº«n tá»«ng bÆ°á»›c chi tiáº¿t Ä‘á»ƒ setup game tá»« Ä‘áº§u.

---

## ğŸ“‹ YÃªu Cáº§u

- **Unity:** 2021.3.45f2 hoáº·c má»›i hÆ¡n
- **TextMeshPro:** (sáº½ tá»± import khi cáº§n)
- **OS:** Windows, macOS, or Linux

---

## ğŸ¯ BÆ°á»›c 1: Má»Ÿ Project

1. Má»Ÿ Unity Hub
2. Click **Add** â†’ chá»n folder `RhythmGame3D`
3. Click vÃ o project Ä‘á»ƒ má»Ÿ

---

## ğŸ¬ BÆ°á»›c 2: Táº¡o Scene Má»›i

### 2.1. Create Scene
1. File â†’ New Scene
2. Chá»n **3D** template
3. File â†’ Save As â†’ `Assets/Scenes/GameScene.unity`

### 2.2. XÃ³a Default Objects (optional)
- CÃ³ thá»ƒ xÃ³a DirectionalLight náº¿u muá»‘n tá»‘i giáº£n

---

## ğŸ® BÆ°á»›c 3: Setup GameManager

### 3.1. Create GameObject
1. Hierarchy â†’ Right-click â†’ Create Empty
2. Rename: `GameManager`
3. Position: (0, 0, 0)

### 3.2. Add Components
Click **Add Component** vÃ  thÃªm láº§n lÆ°á»£t:
1. **GameManager3D** (Script)
2. **NoteSpawner3D** (Script)
3. **InputManager3D** (Script)
4. **JudgmentSystem** (Script)
5. **Audio Source** (Unity built-in)

### 3.3. Configure Components

**NoteSpawner3D Settings:**
- Lane Count: `4`
- Lane Width: `1.5`
- Lane Length: `50`
- Spawn Distance: `40`
- Hit Position: `0`
- Approach Time: `2`

**JudgmentSystem Settings:**
- Perfect Window: `0.04`
- Great Window: `0.08`
- Good Window: `0.12`
- Miss Window: `0.18`
- Perfect Score: `300`
- Great Score: `200`
- Good Score: `100`

**InputManager3D Settings:**
- Lane Keys: `[D, F, J, K]`
- Hit Window: `0.18`

**AudioSource Settings:**
- Play On Awake: `false` âœ˜
- Loop: `false` âœ˜
- Volume: `0.8`

---

## ğŸ“¹ BÆ°á»›c 4: Setup Camera

### 4.1. Configure Main Camera
1. Select **Main Camera** in Hierarchy
2. Transform:
   - Position: `(0, 3, -5)`
   - Rotation: `(15, 0, 0)`
   - Scale: `(1, 1, 1)`
3. Camera component:
   - Clear Flags: `Solid Color`
   - Background: Dark blue `(5, 5, 20)` RGB
   - Field of View: `60`

### 4.2. Add Camera Script
1. Add Component â†’ **CameraController3D**
2. Settings:
   - Camera Distance: `5`
   - Camera Height: `3`
   - Look Down Angle: `15`
   - Field Of View: `60`

---

## ğŸ¨ BÆ°á»›c 5: Táº¡o Materials

### 5.1. Note Material
1. Assets â†’ Create â†’ Material
2. Name: `NoteMaterial`
3. Settings:
   - Shader: `Standard`
   - Rendering Mode: `Transparent`
   - Albedo: Cyan `(100, 180, 255, 255)`
   - Metallic: `0`
   - Smoothness: `0.5`
   - Emission: âœ“ Enabled
   - Emission Color: Cyan `(100, 180, 255)`

### 5.2. Lane Material
1. Assets â†’ Create â†’ Material
2. Name: `LaneMaterial`
3. Settings:
   - Shader: `Standard`
   - Rendering Mode: `Transparent`
   - Albedo: White `(255, 255, 255, 80)` - Alpha 80!
   - Metallic: `0`
   - Smoothness: `0.2`

---

## ğŸµ BÆ°á»›c 6: Táº¡o Note Prefabs

### 6.1. Tap Note Prefab

**Create Cube:**
1. Hierarchy â†’ 3D Object â†’ Cube
2. Rename: `TapNote`
3. Transform:
   - Position: `(0, 0, 0)`
   - Rotation: `(0, 0, 0)`
   - Scale: `(1, 0.5, 1)`

**Add Components:**
1. Add Component â†’ **NoteController3D**

**Setup Renderer:**
1. In Inspector â†’ Mesh Renderer
2. Materials â†’ Element 0 â†’ Assign `NoteMaterial`

**Add Trail (Optional):**
1. Add Component â†’ **Trail Renderer**
2. Settings:
   - Time: `0.3`
   - Width: `0.5` to `0.1`
   - Color: Cyan â†’ Transparent
   - Material: `NoteMaterial`

**Add Particles (Optional):**
1. GameObject â†’ Effects â†’ Particle System (as child)
2. Rename child: `HitParticles`
3. Transform: Position `(0, 0, 0)`
4. Particle System settings:
   - Duration: `0.5`
   - Start Lifetime: `0.3`
   - Start Speed: `3`
   - Start Size: `0.1`
   - Start Color: Cyan
   - Max Particles: `20`
   - Emission Rate: `0` (manual trigger)
   - Shape: Sphere, Radius `0.5`
5. Uncheck "Play On Awake"

**Assign to NoteController3D:**
- Mesh Renderer: Auto-assigned
- Trail Renderer: Drag TrailRenderer here
- Hit Particles: Drag HitParticles here
- Note Color: Cyan `(100, 180, 255)`

**Save as Prefab:**
1. Drag `TapNote` from Hierarchy â†’ `Assets/Prefabs/`
2. Delete from Hierarchy

### 6.2. Long Note Prefab
1. Duplicate `TapNote.prefab`
2. Rename: `LongNote`
3. (Tail will be auto-generated by script)

---

## ğŸ–¼ï¸ BÆ°á»›c 7: Setup UI

### 7.1. Create Canvas
1. Hierarchy â†’ UI â†’ Canvas
2. Canvas settings:
   - Render Mode: `Screen Space - Overlay`
   - Canvas Scaler:
     - UI Scale Mode: `Scale With Screen Size`
     - Reference Resolution: `1920 x 1080`

### 7.2. Add UI Manager Script
1. Select Canvas
2. Add Component â†’ **ModernUIManager3D**

### 7.3. Create UI Elements

**Top Right Panel (Score & Combo):**
1. Canvas â†’ Right-click â†’ UI â†’ Panel
2. Rename: `TopRightPanel`
3. Rect Transform:
   - Anchors: Top-Right
   - Position: `(-150, -50, 0)`
   - Width: `300`, Height: `100`
4. Remove Image component (transparent)

**Score Text:**
1. TopRightPanel â†’ Right-click â†’ UI â†’ Text - TextMeshPro
2. Rename: `ScoreText`
3. Settings:
   - Text: `000000`
   - Font Size: `48`
   - Color: Gold `(255, 215, 0)`
   - Alignment: Right
   - Font Style: Bold

**Combo Text:**
1. TopRightPanel â†’ Right-click â†’ UI â†’ Text - TextMeshPro
2. Rename: `ComboText`
3. Settings:
   - Text: `0x`
   - Font Size: `56`
   - Color: Cyan `(100, 220, 255)`
   - Alignment: Right
   - Position Y: `-60`

**Center Panel (Judgment):**
1. Canvas â†’ UI â†’ Panel
2. Rename: `JudgmentPanel`
3. Rect Transform:
   - Anchors: Center
   - Position: `(0, 50, 0)`
   - Width: `400`, Height: `200`
4. Remove Image component
5. Add Component â†’ **Canvas Group**

**Judgment Text:**
1. JudgmentPanel â†’ UI â†’ Text - TextMeshPro
2. Rename: `JudgmentText`
3. Settings:
   - Text: `Perfect`
   - Font Size: `72`
   - Color: White
   - Alignment: Center
   - Font Style: Bold
   - Auto Size: âœ“

**Early/Late Text:**
1. JudgmentPanel â†’ UI â†’ Text - TextMeshPro
2. Rename: `EarlyLateText`
3. Settings:
   - Text: `Early`
   - Font Size: `32`
   - Color: Green `(100, 255, 100)`
   - Alignment: Center
   - Position Y: `-60`

**Bottom Panel (Accuracy, Health, Time):**
1. Canvas â†’ UI â†’ Panel
2. Rename: `BottomPanel`
3. Rect Transform:
   - Anchors: Bottom-Stretch
   - Position: `(0, 40, 0)`
   - Height: `80`
4. Remove Image

**Accuracy Text:**
1. BottomPanel â†’ UI â†’ Text - TextMeshPro
2. Rename: `AccuracyText`
3. Settings:
   - Text: `100.00%`
   - Font Size: `36`
   - Color: Gold
   - Alignment: Center
   - Anchors: Center
   - Position: `(0, 0, 0)`

**Health Bar:**
1. BottomPanel â†’ UI â†’ Slider
2. Rename: `HealthBar`
3. Settings:
   - Anchors: Left-Right stretch
   - Position: `(0, -30, 0)`
   - Height: `20`
   - Min Value: `0`, Max Value: `1`
   - Value: `1`
   - Interactable: âœ˜ (unchecked)
4. Fill Area â†’ Fill:
   - Color: Green
5. Delete Handle Slide Area (not needed)

**Time Text:**
1. BottomPanel â†’ UI â†’ Text - TextMeshPro
2. Rename: `TimeText`
3. Settings:
   - Text: `0:00 / 3:00`
   - Font Size: `24`
   - Color: White (alpha 0.7)
   - Alignment: Right
   - Anchors: Right
   - Position: `(-20, 0, 0)`

### 7.4. Assign to ModernUIManager3D
Select Canvas, in **ModernUIManager3D** component:
- Score Text: Drag `ScoreText`
- Combo Text: Drag `ComboText`
- Judgment Text: Drag `JudgmentText`
- Early Late Text: Drag `EarlyLateText`
- Judgment Group: Drag `JudgmentPanel` (CanvasGroup)
- Accuracy Text: Drag `AccuracyText`
- Health Bar: Drag `HealthBar` (Slider)
- Time Text: Drag `TimeText`

---

## ğŸ”— BÆ°á»›c 8: Connect All References

### 8.1. GameManager3D References
Select `GameManager` GameObject, in **GameManager3D** component:
- Note Spawner: Drag `GameManager` (NoteSpawner3D component)
- Input Manager: Drag `GameManager` (InputManager3D component)
- Judgment System: Drag `GameManager` (JudgmentSystem component)
- UI Manager: Drag `Canvas` (ModernUIManager3D component)
- Music Source: Drag `GameManager` (AudioSource component)
- Beatmap File Path: (leave empty for now)
- Audio Offset: `0.1`

### 8.2. InputManager3D References
In **InputManager3D** component:
- Note Spawner: Drag `GameManager` (NoteSpawner3D)
- Judgment System: Drag `GameManager` (JudgmentSystem)
- Hit Window: `0.18`

### 8.3. NoteSpawner3D References
In **NoteSpawner3D** component:
- Tap Note Prefab: Drag `Assets/Prefabs/TapNote`
- Long Note Prefab: Drag `Assets/Prefabs/LongNote`
- Lane Material: Drag `Assets/Materials/LaneMaterial`

---

## ğŸµ BÆ°á»›c 9: Add Beatmap

### 9.1. Prepare Files
1. Copy file `.osu` vÃ o `Assets/Beatmaps/`
2. Copy file audio (mp3/ogg) vÃ o cÃ¹ng folder

### 9.2. Assign Beatmap
1. Select GameManager
2. In GameManager3D component:
   - Beatmap File Path: `/full/path/to/your/beatmap.osu`
   - VÃ­ dá»¥: `/Volumes/KIEN 4TB/LuanVan copy/dataset/668952 Various Artists - 4k Beginner Pack.osz/beatmap.osu`

### 9.3. Assign Audio
1. Drag audio file vÃ o Assets (Unity sáº½ import)
2. Select GameManager
3. In AudioSource component:
   - Audio Clip: Drag audio file tá»« Assets

---

## â–¶ï¸ BÆ°á»›c 10: Test & Play!

### 10.1. First Test
1. Click **Play** button
2. Lanes should appear (4 vertical lanes)
3. Camera should be looking down the lanes

### 10.2. Start Song
1. While playing, press **Space**
2. Music should start
3. Notes should spawn from far away (Z=40) and move towards camera (Z=0)

### 10.3. Test Input
- Press **D, F, J, K** keys when notes reach hit position
- Judgment text should appear (Perfect/Great/Good/Miss)
- Score and combo should update
- Hit particles should play

---

## âœ… Checklist

TrÆ°á»›c khi play, check láº¡i:
- [ ] GameManager cÃ³ Ä‘áº§y Ä‘á»§ 4 components + AudioSource
- [ ] Prefabs TapNote vÃ  LongNote Ä‘Ã£ táº¡o
- [ ] Materials NoteMaterial vÃ  LaneMaterial Ä‘Ã£ táº¡o
- [ ] Canvas vá»›i ModernUIManager3D vÃ  táº¥t cáº£ UI elements
- [ ] Táº¥t cáº£ references Ä‘Ã£ assign Ä‘Ãºng
- [ ] Beatmap file path Ä‘Ãºng
- [ ] Audio clip Ä‘Ã£ assign
- [ ] Camera nhÃ¬n vá» phÃ­a lanes

---

## ğŸ› Common Issues

**Lá»—i: NullReferenceException**
â†’ Check láº¡i táº¥t cáº£ references Ä‘Ã£ assign

**Notes khÃ´ng xuáº¥t hiá»‡n**
â†’ Check prefabs Ä‘Ã£ assign vÃ o NoteSpawner3D
â†’ Check beatmap file path Ä‘Ãºng

**KhÃ´ng cÃ³ Ã¢m thanh**
â†’ Check AudioClip Ä‘Ã£ assign
â†’ Check AudioSource volume > 0

**UI khÃ´ng hiá»‡n**
â†’ Check Canvas Render Mode = Screen Space Overlay
â†’ Check UI elements active

**Input khÃ´ng hoáº¡t Ä‘á»™ng**
â†’ Check InputManager3D references
â†’ Check khÃ´ng cÃ³ object khÃ¡c cháº·n input

---

## ğŸ‰ Xong!

BÃ¢y giá» báº¡n Ä‘Ã£ cÃ³ 1 rhythm game 3D hoÃ n chá»‰nh!

**Next steps:**
- Thá»­ vá»›i nhiá»u beatmap khÃ¡c nhau
- TÃ¹y chá»‰nh mÃ u sáº¯c vÃ  effects
- ThÃªm features má»›i

**Have fun!** ğŸ®ğŸµ
